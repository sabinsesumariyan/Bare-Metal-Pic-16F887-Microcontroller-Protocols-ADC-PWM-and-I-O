#include<pic.h>
void main()
{
	PORTA=0X00;
	TRISA=0X07;
	PORTB=0X00;
	TRISB=0X00;
	PORTC=0X00;
	TRISC=0X00;
	PORTD=0X00;
	TRISD=0X00;
	ANSEL=0X00;
	ANSELH=0X00;
	int control=1;
	int segment[]={0XBF,0X06,0X5B,0X4F,0X66,0X6D,0X7C,0X07,0XFF,0XE7};
	int arr[4]={0,0,0,0};
	int mat[4]={0,0,0,0};
	int temp=0;
	int dump=0;
	int count=0;
	int count1=0;
	int i;
	int check=0,correct=0,wrong=0;
	while(1)
	{
		if(control==1)
		{
			RB0=1;
			RB1=0;
			RB2=0;
			RB3=0;
			if(RA0==1)
			{
				arr[temp]=1;
				temp++;
				while(RA0==1);		
			}
			if(RA1==1)
			{
				arr[temp]=2;
				temp++;
				while(RA0==1);		
			}
			if(RA2==1)
			{
				arr[temp]=3;
				temp++;
				while(RA0==1);		
			}
			RB0=0;
			RB1=1;
			RB2=0;
			RB3=0;
			if(RA0==1)
			{
				arr[temp]=4;
				temp++;
				while(RA0==1);		
			}
			if(RA1==1)
			{
				arr[temp]=5;
				temp++;
				while(RA0==1);		
			}
			if(RA2==1)
			{
				arr[temp]=6;
				temp++;
				while(RA0==1);		
			}
			RB0=0;
			RB1=0;
			RB2=1;
			RB3=0;
			if(RA0==1)
			{
				arr[temp]=7;
				temp++;
				while(RA0==1);		
			}

			if(RA1==1)
			{
				arr[temp]=8;
				temp++;
				while(RA0==1);		
			}
			if(RA2==1)
			{
				arr[temp]=9;
				temp++;
				while(RA0==1);		
			}
			RB0=0;
			RB1=0;
			RB2=0;
			RB3=1;
			if(RA0==1)
			{
				while(RA0==1);
				control=2;
			}
			while(count<3000)
			{
				RD0=0;RD1=1;RD2=1;RD3=1;
				PORTC=segment[arr[0]];
				count++;
			}
			count=0;
			while(count<3000)
			{
				RD0=1;RD1=0;RD2=1;RD3=1;
				PORTC=segment[arr[1]];
				count++;
			}
			count=0;
			while(count<3000)
			{
				RD0=1;RD1=1;RD2=0;RD3=1;
				PORTC=segment[arr[2]];
				count++;
			}
			count=0;
			while(count<3000)
			{
				RD0=1;RD1=1;RD2=1;RD3=0;
				PORTC=segment[arr[3]];
				count++;
			}
			count=0;	
		}
		if(control==2)
		{
			RB0=1;
			RB1=0;
			RB2=0;
			RB3=0;
			if(RA0==1)
			{
				mat[dump]=1;
				dump++;
				while(RA0==1);		
			}
			if(RA1==1)
			{
				mat[dump]=2;
				dump++;
				while(RA0==1);		
			}
			if(RA2==1)
			{
				mat[dump]=3;
				dump++;
				while(RA0==1);		
			}
			RB0=0;
			RB1=1;
			RB2=0;
			RB3=0;
			if(RA0==1)
			{
				mat[dump]=4;
				dump++;
				while(RA0==1);		
			}
			if(RA1==1)
			{
				mat[dump]=5;
				dump++;
				while(RA0==1);		
			}
			if(RA2==1)
			{
				mat[dump]=6;
				dump++;
				while(RA0==1);		
			}
			RB0=0;
			RB1=0;
			RB2=1;
			RB3=0;
			if(RA0==1)
			{
				mat[dump]=7;
				dump++;
				while(RA0==1);		
			}
			if(RA1==1)
			{
				mat[dump]=8;
				dump++;
				while(RA0==1);		
			}
			if(RA2==1)
			{
				mat[dump]=9;
				dump++;
				while(RA0==1);		
			}
			RB0=0;
			RB1=0;
			RB2=0;
			RB3=1;
			if(RA0==1)
			{
				while(RA0==1);
				control=3;
			}
			while(count<3000)
			{
				RD0=0;RD1=1;RD2=1;RD3=1;
				PORTC=segment[mat[0]];
				count++;
			}
			count=0;
			while(count<3000)
			{
				RD0=1;RD1=0;RD2=1;RD3=1;
				PORTC=segment[mat[1]];
				count++;
			}
			count=0;
			while(count<3000)
			{
				RD0=1;RD1=1;RD2=0;RD3=1;
				PORTC=segment[mat[2]];
				count++;
			}
			count=0;
			while(count<3000)
			{
				RD0=1;RD1=1;RD2=1;RD3=0;
				PORTC=segment[mat[3]];
				count++;
			}
			count=0;	
		}
		if(control==3)
		{
			for(i=0;i<4;i++)
			{
				check++;
				if(arr[i]==mat[i])
				{
					correct++;
				}
				else
				{
					wrong++;
				}	
			}
			if(check==correct)
			{
				while(count<3000)
				{
					RD0=0;RD1=1;RD2=1;RD3=1;
					PORTC=0X5E;
					RA3=1;
					count++;
				}
				count=0;
				while(count<3000)
				{
					RD0=1;RD1=0;RD2=1;RD3=1;
					PORTC=0XBF;
					RA3=1;
					count++;
				}
				count=0;
				while(count<3000)
				{
					RD0=1;RD1=1;RD2=0;RD3=1;
					PORTC=0X37;
					RA3=1;
					count++;
				}
				count=0;
				while(count<3000)
				{
					RD0=1;RD1=1;RD2=1;RD3=0;
					PORTC=0XF9;
					RA3=1;
					count++;
				}
				count=0;
			}
			else
			{
				while(count<3000)
				{
					RD0=0;RD1=1;RD2=1;RD3=1;
					PORTC=0X37;
					RA4=1;
					count++;
				}
				count=0;
				while(count<3000)
				{
					RD0=1;RD1=0;RD2=1;RD3=1;
					PORTC=0XBF;
					RA4=1;
					count++;
				}
				count=0;
				while(count<3000)
				{
					RD0=1;RD1=1;RD2=0;RD3=1;
					PORTC=0XBF;
					RA4=1;
					count++;
				}
				count=0;
				while(count<3000)
				{
					RD0=1;RD1=1;RD2=1;RD3=0;
					PORTC=0XBF;
					RA4=1;
					count++;
				}
				count=0;
			}
			RB0=1;
			RB1=0;
			RB2=0;
			RB3=0;
			if(RA0==1 || RA1==1 || RA2==1)
			{
				control=1;
				RA3=0;
				RA4=0;
				arr[4]=0;
				mat[4]=0;
				arr[3]=0;
				mat[3]=0;
				arr[2]=0;
				mat[2]=0;
				arr[1]=0;
				mat[1]=0;
				temp=0;
				dump=0;
			}
		}
	}
}
	
