#include<pic.h>
void main()
{
	PORTA=0X00;
	TRISA=0X07;
	PORTB=0X00;
	TRISB=0X00;
	PORTC=0X00;
	TRISC=0X00;
	PORTD=0X00;
	TRISD=0X00;
	PORTE=0X00;
	TRISE=0X00;
	ANSEL=0X00;
	ANSELH=0X00;
	int control=1;
	int segment[]={0XBF,0X06,0X5B,0X4F,0X66,0X6D,0X7C,0X07,0XFF,0XE7};
	int arr=0;
	int count=0;
	int i=0,j=0;
	int set=0;
	while(1)
	{
		if(control==1)
		{
			RB0=1;
			RB1=0;
			RB2=0;
			RB3=0;
			if(RA0==1)
			{
				arr=1;
				while(RA0==1);		
			}
			if(RA1==1)
			{
				arr=2;
				while(RA0==1);		
			}
			if(RA2==1)
			{
				arr=3;
				while(RA0==1);		
			}
			RB0=0;
			RB1=1;
			RB2=0;
			RB3=0;
			if(RA0==1)
			{
				arr=4;
				while(RA0==1);		
			}
			if(RA1==1)
			{
				arr=5;
				while(RA0==1);		
			}
			if(RA2==1)
			{
				arr=6;
				while(RA0==1);		
			}
			RB0=0;
			RB1=0;
			RB2=1;
			RB3=0;
			if(RA0==1)
			{
				arr=7;
				while(RA0==1);		
			}

			if(RA1==1)
			{
				arr=8;
				while(RA0==1);		
			}
			if(RA2==1)
			{
				arr=9;
				while(RA0==1);		
			}
			RB0=0;
			RB1=0;
			RB2=0;
			RB3=1;
			if(RA0==1)
			{
				while(RA0==1);
				control=2;
			}
			while(count<3000)
			{
				RD0=0;RD1=1;
				PORTC=segment[arr];
				count++;
			}
			count=0;
			while(count<3000)
			{
				RD0=1;RD1=0;
				PORTC=segment[5];
				count++;
			}
			count=0;	
		}
		if(control==2)
		{
			for(i=0;i<arr;)
			{
				while(count<20000)
				{
					RA3=1;
					count++;
					RB0=0;
					RB1=0;
					RB2=0;
					RB3=1;
					if(RA0==1)
					{
						while(RA0==1);
						control=1;
					}
				}
				count=0;
				i++;
			}
			for(j=0;j<arr;)
			{
				while(count<20000)
				{
					RA3=0;
					count++;
					RB0=0;
					RB1=0;
					RB2=0;
					RB3=1;
					if(RA0==1)
					{
						while(RA0==1);
						control=1;
					}
				}
				count=0;
				j++;
			}
		}
	}
}	